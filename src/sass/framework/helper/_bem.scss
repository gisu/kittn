
/**
 * Build a BEM Element
 *
 * @param {string}  $name - The selector name
 */
@mixin element($name) {
  @at-root {
    &#{$mark-bem-element}#{$name} {
      @content;
    }
  }
}

/**
 * Build a BEM Modifier, with extend functionality
 *
 * @param {*}     $name - The selector name
 * @param {bool}  $extend (false) - Parent Selector Name
 */
@mixin modifier($name, $extend: false) {
  @at-root {
    &#{$mark-bem-modifier}#{$name} {
      // Extend with the Parent Element
      @if $extend != false {
        @extend #{$extend};
      }

      @content;
    }
  }
}

/**
 * Setup the Root Element for the following chained Modifers
 *
 * @param {string}  $name - The selector name
 *
 * @example
 * @include chainroot('text') {
 *  content: hello;
 * }
 *
 */
@mixin chainroot($name) {
  // Define the Parent Class - for Nested Chains
  $chain-parent: $name !global;

  @at-root {
    [class^="#{$name}"] {
      @content;
    }
  }
}

/**
 * Chain the Modifiers
 *
 * @param {string}   $name - The selector name, only the name
 * @param {string}   $parent ($chain-parent) - Selector of the parent Element
 *
 * @example
 *  @include chain(bright, 'test') {
 *    color: #fff;
 *  }
 *  @include chainroot('just-a-test') {
 *    font-size: 20px;
 *    line-height: 24px;
 *
 *    @include chain('wider') {
 *      width: 300px;
 *    }
 *  }
 */
@mixin chain($name, $parent: $chain-parent) {
  @at-root {
    [class^="#{$parent}"][class*="#{$mark-bem-modifier}#{$name}"] {
      @content;
    }
  }
}
